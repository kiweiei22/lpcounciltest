<!DOCTYPE html>
<html lang="th" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SC Console | ระบบจัดการสภานักเรียน</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"IBM Plex Sans Thai"', '"Outfit"', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f5f3ff', 100: '#ede9fe', 500: '#8b5cf6', 600: '#7c3aed', 900: '#4c1d95'
                        }
                    }
                }
            }
        }
    </script>
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body
    class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 h-screen flex overflow-hidden selection:bg-brand-500 selection:text-white">

    <!-- Login Screen -->
    <div id="loginScreen"
        class="fixed inset-0 z-[60] bg-white/50 dark:bg-black/50 backdrop-blur-xl flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 rounded-[2.5rem] shadow-2xl p-10 w-full max-w-sm text-center relative overflow-hidden animate-in border border-slate-100 dark:border-white/5">
            <div
                class="w-24 h-24 bg-gradient-to-tr from-brand-500 to-blue-500 rounded-3xl mx-auto mb-8 shadow-lg flex items-center justify-center text-4xl text-white">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h1 class="text-3xl font-bold mb-2 text-slate-900 dark:text-white font-sans tracking-tight">Admin Login
            </h1>
            <p class="text-slate-500 dark:text-slate-400 mb-8 text-sm">Sign in with your admin account</p>

            <form onsubmit="event.preventDefault(); window.checkLogin();">
                <div class="space-y-4">
                    <input type="email" id="emailInput" placeholder="Email"
                        class="input-modern w-full p-4 rounded-2xl text-center text-base font-medium outline-none placeholder:font-normal text-slate-700 dark:text-white dark:bg-slate-900/50">
                    <input type="password" id="passwordInput" placeholder="Password"
                        class="input-modern w-full p-4 rounded-2xl text-center text-base font-medium outline-none placeholder:font-normal text-slate-700 dark:text-white dark:bg-slate-900/50">
                    <div id="loginError" class="hidden text-red-500 text-sm font-medium"></div>
                    <button type="submit" id="loginBtn"
                        class="w-full bg-slate-900 dark:bg-white dark:text-slate-900 text-white py-4 rounded-2xl font-bold hover:scale-[1.02] active:scale-[0.98] transition shadow-xl">
                        <span id="loginBtnText">Sign In</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="hidden flex w-full h-full p-2 md:p-4 gap-4">

        <!-- Sidebar -->
        <aside id="sidebar"
            class="w-72 bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-[2rem] flex flex-col shadow-lg border border-white/50 dark:border-white/5 fixed md:relative h-[calc(100%-2rem)] md:h-full z-50 transform -translate-x-[110%] md:translate-x-0 transition-transform duration-300">
            <!-- Logo -->
            <div class="h-24 flex items-center px-8 border-b border-slate-100 dark:border-white/5">
                <div
                    class="w-10 h-10 bg-gradient-to-br from-brand-500 to-blue-600 rounded-xl mr-4 flex items-center justify-center text-white shadow-lg shadow-brand-500/20">
                    <i class="fas fa-shapes"></i>
                </div>
                <div>
                    <h1 class="font-bold text-xl tracking-tight dark:text-white">SC Console</h1>
                    <p class="text-[10px] uppercase font-bold text-slate-400 tracking-wider">Admin Panel</p>
                </div>
            </div>

            <!-- Nav -->
            <nav class="flex-1 overflow-y-auto p-4 space-y-1">
                <p class="px-4 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 mt-4">Overview</p>
                <button onclick="window.switchTab('overview')" id="btn-overview"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-grid-2 w-6 text-center group-hover:text-brand-500 transition-colors"></i> <span
                        class="font-medium text-sm">Dashboard</span>
                </button>
                <button onclick="window.switchTab('calendar')" id="btn-calendar"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-calendar-alt w-6 text-center group-hover:text-brand-500 transition-colors"></i>
                    <span class="font-medium text-sm">Calendar</span>
                </button>


                <p class="px-4 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 mt-6">Management</p>
                <button onclick="window.switchTab('complaints')" id="btn-complaints"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-inbox w-6 text-center group-hover:text-brand-500 transition-colors"></i>
                    <span class="font-medium text-sm">Complaints</span>
                    <span id="badge-complaints"
                        class="hidden ml-auto bg-brand-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow-sm shadow-brand-500/30">New</span>
                </button>
                <button onclick="window.switchTab('policies')" id="btn-policies"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-list-check w-6 text-center group-hover:text-brand-500 transition-colors"></i> <span
                        class="font-medium text-sm">Policies</span>
                </button>
                <button onclick="window.switchTab('qa')" id="btn-qa"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-comments w-6 text-center group-hover:text-brand-500 transition-colors"></i> <span
                        class="font-medium text-sm">Q&A</span>
                </button>

                <p class="px-4 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 mt-6">Content</p>
                <button onclick="window.switchTab('announcement')" id="btn-announcement"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-bullhorn w-6 text-center group-hover:text-brand-500 transition-colors"></i> <span
                        class="font-medium text-sm">Announcement</span>
                </button>
                <button onclick="window.switchTab('activities')" id="btn-activities"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-newspaper w-6 text-center group-hover:text-brand-500 transition-colors"></i> <span
                        class="font-medium text-sm">News / Gallery</span>
                </button>
                <button onclick="window.switchTab('members')" id="btn-members"
                    class="nav-item w-full p-3.5 flex items-center gap-4 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 rounded-2xl transition-all group">
                    <i class="fas fa-users w-6 text-center group-hover:text-brand-500 transition-colors"></i> <span
                        class="font-medium text-sm">Team</span>
                </button>
            </nav>

            <!-- Bottom Actions -->
            <div class="p-4 border-t border-slate-100 dark:border-white/5 space-y-2">
                <button onclick="window.toggleDarkMode()" id="darkModeBtn"
                    class="w-full p-3 flex items-center justify-center gap-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition text-sm font-bold">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
                <button onclick="window.logout()"
                    class="w-full p-3 flex items-center justify-center gap-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition text-sm font-bold">
                    <i class="fas fa-power-off"></i> Logout
                </button>
            </div>
        </aside>

        <!-- Overlay -->
        <div id="sidebarOverlay" onclick="window.toggleSidebar()"
            class="fixed inset-0 bg-black/20 backdrop-blur-sm z-40 hidden md:hidden"></div>

        <!-- Main Content -->
        <main
            class="flex-1 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-[2rem] border border-white/50 dark:border-slate-700/50 overflow-hidden relative shadow-sm flex flex-col">

            <!-- Mobile Header -->
            <header
                class="md:hidden h-16 flex items-center justify-between px-6 border-b border-slate-200/50 dark:border-white/5">
                <span class="font-bold text-lg dark:text-white">Admin</span>
                <button onclick="window.toggleSidebar()" class="p-2 text-slate-500"><i
                        class="fas fa-bars text-xl"></i></button>
            </header>

            <div class="flex-1 overflow-y-auto p-6 md:p-10 scroll-smooth">

                <!-- OVERVIEW -->
                <div id="view-overview" class="animate-in max-w-7xl mx-auto">
                    <!-- Header with Welcome -->
                    <div class="mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div>
                            <h2 class="text-4xl font-extrabold text-slate-900 dark:text-white mb-1 tracking-tight">
                                สวัสดี Admin </h2>
                            <p class="text-slate-500 dark:text-slate-400 font-medium" id="currentDateTime">Loading...
                            </p>
                        </div>
                        <div class="flex gap-3">
                            <a href="index.html" target="_blank"
                                class="flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm">
                                <i class="fas fa-external-link-alt"></i> ดูเว็บไซต์
                            </a>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        <!-- Stat Card 1: Pending -->
                        <div onclick="window.switchTab('complaints')"
                            class="cursor-pointer bg-gradient-to-br from-amber-500 to-orange-600 p-6 rounded-3xl shadow-lg shadow-amber-500/20 relative overflow-hidden group hover:scale-[1.02] transition-all duration-300">
                            <div class="absolute right-0 bottom-0 opacity-20">
                                <i class="fas fa-inbox text-8xl text-white translate-x-4 translate-y-4"></i>
                            </div>
                            <div class="relative z-10">
                                <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center mb-4">
                                    <i class="fas fa-clock text-2xl text-white"></i>
                                </div>
                                <h3 class="text-4xl font-black text-white mb-1" id="stat-pending-c">0</h3>
                                <p class="text-white/80 text-sm font-medium">รอดำเนินการ</p>
                            </div>
                        </div>

                        <!-- Stat Card 2: Resolved -->
                        <div onclick="window.switchTab('complaints')"
                            class="cursor-pointer bg-gradient-to-br from-emerald-500 to-teal-600 p-6 rounded-3xl shadow-lg shadow-emerald-500/20 relative overflow-hidden group hover:scale-[1.02] transition-all duration-300">
                            <div class="absolute right-0 bottom-0 opacity-20">
                                <i class="fas fa-check-double text-8xl text-white translate-x-4 translate-y-4"></i>
                            </div>
                            <div class="relative z-10">
                                <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center mb-4">
                                    <i class="fas fa-check-circle text-2xl text-white"></i>
                                </div>
                                <h3 class="text-4xl font-black text-white mb-1" id="stat-done-c">0</h3>
                                <p class="text-white/80 text-sm font-medium">แก้ไขแล้ว</p>
                            </div>
                        </div>

                        <!-- Stat Card 3: Policies -->
                        <div onclick="window.switchTab('policies')"
                            class="cursor-pointer bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-3xl shadow-lg shadow-blue-500/20 relative overflow-hidden group hover:scale-[1.02] transition-all duration-300">
                            <div class="absolute right-0 bottom-0 opacity-20">
                                <i class="fas fa-list-check text-8xl text-white translate-x-4 translate-y-4"></i>
                            </div>
                            <div class="relative z-10">
                                <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center mb-4">
                                    <i class="fas fa-scroll text-2xl text-white"></i>
                                </div>
                                <h3 class="text-4xl font-black text-white mb-1" id="stat-policy">0</h3>
                                <p class="text-white/80 text-sm font-medium">นโยบาย</p>
                            </div>
                        </div>

                        <!-- Stat Card 4: Q&A -->
                        <div onclick="window.switchTab('qa')"
                            class="cursor-pointer bg-gradient-to-br from-purple-500 to-pink-600 p-6 rounded-3xl shadow-lg shadow-purple-500/20 relative overflow-hidden group hover:scale-[1.02] transition-all duration-300">
                            <div class="absolute right-0 bottom-0 opacity-20">
                                <i class="fas fa-comments text-8xl text-white translate-x-4 translate-y-4"></i>
                            </div>
                            <div class="relative z-10">
                                <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center mb-4">
                                    <i class="fas fa-comment-dots text-2xl text-white"></i>
                                </div>
                                <h3 class="text-4xl font-black text-white mb-1" id="stat-qa">0</h3>
                                <p class="text-white/80 text-sm font-medium">รอตอบ Q&A</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions + Recent Activity -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <!-- Quick Actions -->
                        <div
                            class="bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-white/5">
                            <h3 class="font-bold text-lg text-slate-900 dark:text-white mb-4 flex items-center gap-2">
                                <i class="fas fa-bolt text-amber-500"></i> Quick Actions
                            </h3>
                            <div class="grid grid-cols-2 gap-3">
                                <button onclick="window.openCreatePolicy()"
                                    class="p-4 bg-blue-50 dark:bg-blue-500/10 hover:bg-blue-100 dark:hover:bg-blue-500/20 rounded-2xl text-center transition group">
                                    <i
                                        class="fas fa-plus-circle text-2xl text-blue-500 mb-2 group-hover:scale-110 transition"></i>
                                    <p class="text-xs font-bold text-blue-700 dark:text-blue-300">เพิ่มนโยบาย</p>
                                </button>
                                <button onclick="window.openModal('activityModal')"
                                    class="p-4 bg-green-50 dark:bg-green-500/10 hover:bg-green-100 dark:hover:bg-green-500/20 rounded-2xl text-center transition group">
                                    <i
                                        class="fas fa-newspaper text-2xl text-green-500 mb-2 group-hover:scale-110 transition"></i>
                                    <p class="text-xs font-bold text-green-700 dark:text-green-300">โพสต์ข่าว</p>
                                </button>
                                <button onclick="window.openCreateMember()"
                                    class="p-4 bg-purple-50 dark:bg-purple-500/10 hover:bg-purple-100 dark:hover:bg-purple-500/20 rounded-2xl text-center transition group">
                                    <i
                                        class="fas fa-user-plus text-2xl text-purple-500 mb-2 group-hover:scale-110 transition"></i>
                                    <p class="text-xs font-bold text-purple-700 dark:text-purple-300">เพิ่มสมาชิก</p>
                                </button>
                                <button onclick="window.openModal('eventModal')"
                                    class="p-4 bg-orange-50 dark:bg-orange-500/10 hover:bg-orange-100 dark:hover:bg-orange-500/20 rounded-2xl text-center transition group">
                                    <i
                                        class="fas fa-calendar-plus text-2xl text-orange-500 mb-2 group-hover:scale-110 transition"></i>
                                    <p class="text-xs font-bold text-orange-700 dark:text-orange-300">เพิ่มกิจกรรม</p>
                                </button>
                            </div>
                        </div>

                        <!-- Recent Complaints -->
                        <div
                            class="lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-white/5">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-lg text-slate-900 dark:text-white flex items-center gap-2">
                                    <i class="fas fa-inbox text-brand-500"></i> เรื่องร้องเรียนล่าสุด
                                </h3>
                                <button onclick="window.switchTab('complaints')"
                                    class="text-xs font-bold text-brand-500 hover:text-brand-600 transition">ดูทั้งหมด
                                    →</button>
                            </div>
                            <div id="recentComplaintsList" class="space-y-3">
                                <div class="text-center py-8 text-slate-400">
                                    <i class="fas fa-inbox text-4xl mb-2 opacity-50"></i>
                                    <p class="text-sm">กำลังโหลด...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Maintenance Toggle -->
                    <div
                        class="bg-slate-900 dark:bg-black text-white p-8 rounded-[2rem] shadow-xl flex flex-col md:flex-row items-center justify-between gap-6 relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 w-64 h-64 bg-red-500 rounded-full blur-[100px] opacity-20 pointer-events-none translate-x-1/2 -translate-y-1/2">
                        </div>
                        <div class="relative z-10">
                            <h3 class="text-2xl font-bold mb-2 flex items-center gap-3">
                                <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse" id="maintenanceDot"></div>
                                <i class="fas fa-tools text-red-400"></i> Maintenance Mode
                            </h3>
                            <p class="text-slate-400 max-w-md">เปิดโหมดนี้เพื่อปิดเว็บไซต์ชั่วคราว
                                ผู้ใช้ทั่วไปจะไม่สามารถเข้าถึงได้ แต่ Admin ยังใช้งาน Console นี้ได้ปกติ</p>
                        </div>
                        <div class="flex items-center gap-4 z-10">
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="maintenanceToggle" class="sr-only peer"
                                    onchange="window.toggleMaintenance(this)">
                                <div
                                    class="w-16 h-9 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-7 after:w-7 after:transition-all peer-checked:bg-red-500 shadow-inner">
                                </div>
                            </label>
                            <span class="font-bold text-xl" id="maintenanceStatusText">OFF</span>
                        </div>
                    </div>

                    <!-- Additional Stats Row -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                        <div
                            class="bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-100 dark:border-white/5 flex items-center gap-4">
                            <div
                                class="w-12 h-12 bg-cyan-100 dark:bg-cyan-500/20 rounded-xl flex items-center justify-center">
                                <i class="fas fa-users text-xl text-cyan-600 dark:text-cyan-400"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-black text-slate-900 dark:text-white" id="stat-members">0</p>
                                <p class="text-xs text-slate-500 font-medium">สมาชิกทีม</p>
                            </div>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-100 dark:border-white/5 flex items-center gap-4">
                            <div
                                class="w-12 h-12 bg-rose-100 dark:bg-rose-500/20 rounded-xl flex items-center justify-center">
                                <i class="fas fa-newspaper text-xl text-rose-600 dark:text-rose-400"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-black text-slate-900 dark:text-white" id="stat-news">0</p>
                                <p class="text-xs text-slate-500 font-medium">ข่าวสาร</p>
                            </div>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-100 dark:border-white/5 flex items-center gap-4">
                            <div
                                class="w-12 h-12 bg-indigo-100 dark:bg-indigo-500/20 rounded-xl flex items-center justify-center">
                                <i class="fas fa-calendar-alt text-xl text-indigo-600 dark:text-indigo-400"></i>
                            </div>
                            <div>
                                <p class="text-2xl font-black text-slate-900 dark:text-white" id="stat-events">0</p>
                                <p class="text-xs text-slate-500 font-medium">กิจกรรม</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CALENDAR MANAGER -->
                <div id="view-calendar" class="hidden animate-in max-w-6xl mx-auto">
                    <header class="mb-8 flex justify-between items-center">
                        <div>
                            <h2 class="text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight">Events
                            </h2>
                            <p class="text-slate-500 dark:text-slate-400 font-medium">Manage school schedule</p>
                        </div>
                        <button onclick="window.openModal('eventModal')"
                            class="bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition"><i
                                class="fas fa-plus mr-2"></i> Add Event</button>
                    </header>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div
                            class="bg-white dark:bg-slate-800 p-8 rounded-[2rem] shadow-sm border border-slate-100 dark:border-white/5">
                            <h3 class="font-bold text-xl mb-6 text-slate-900 dark:text-white">Upcoming Events</h3>
                            <div id="adminEventList" class="space-y-4">
                                <!-- JS Injected -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- COMPLAINTS -->
                <div id="view-complaints" class="hidden animate-in max-w-6xl mx-auto">
                    <header class="mb-8 flex flex-col md:flex-row justify-between items-end gap-4">
                        <div>
                            <h2 class="text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight">Inbox</h2>
                            <p class="text-slate-500 dark:text-slate-400 font-medium">Manage student complaints</p>
                        </div>
                        <div class="flex flex-wrap gap-2 w-full md:w-auto">
                            <select onchange="window.filterComplaints(this.value)"
                                class="input-modern px-4 py-2.5 rounded-xl text-sm outline-none dark:bg-slate-800 dark:border-slate-700">
                                <option value="All">All Status</option>
                                <option value="Pending">Wait</option>
                                <option value="In Progress">Doing</option>
                                <option value="Done">Done</option>
                                <option value="Completed">Completed</option>
                            </select>
                            <input type="text" placeholder="Search..."
                                onkeyup="window.searchTable('complaintTable', this.value)"
                                class="input-modern px-4 py-2.5 rounded-xl text-sm outline-none w-full md:w-64 dark:bg-slate-800 dark:border-slate-700">
                            <button onclick="window.exportComplaintsCSV()"
                                class="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2.5 rounded-xl text-sm font-bold shadow-lg shadow-emerald-500/20 transition"><i
                                    class="fas fa-file-csv"></i></button>
                        </div>
                    </header>

                    <div
                        class="bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-100 dark:border-white/5 overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full text-left whitespace-nowrap">
                                <thead
                                    class="bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-white/5 text-slate-500 dark:text-slate-400 text-xs uppercase font-bold tracking-wider">
                                    <tr>
                                        <th class="p-6">Time</th>
                                        <th class="p-6">ID</th>
                                        <th class="p-6">Topic</th>
                                        <th class="p-6">By</th>
                                        <th class="p-6">Status</th>
                                        <th class="p-6">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="complaintTable" class="text-sm divide-y divide-slate-50 dark:divide-white/5">
                                </tbody>
                            </table>
                        </div>
                        <div id="complaintLoading" class="p-20 text-center text-slate-400"><i
                                class="fas fa-circle-notch fa-spin text-3xl mb-4 text-brand-500"></i><br>Loading...
                        </div>
                    </div>
                </div>

                <!-- POLICIES -->
                <div id="view-policies" class="hidden animate-in max-w-6xl mx-auto">
                    <header class="mb-8 flex justify-between items-center">
                        <div>
                            <h2 class="text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight">Policies
                            </h2>
                            <p class="text-slate-500 dark:text-slate-400 font-medium">Track progress</p>
                        </div>
                        <button onclick="window.openCreatePolicy()"
                            class="bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition"><i
                                class="fas fa-plus mr-2"></i> New Policy</button>
                    </header>
                    <div id="policyGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                </div>

                <!-- Q&A -->
                <div id="view-qa" class="hidden animate-in max-w-6xl mx-auto">
                    <header class="mb-8 flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight">Q&A</h2>
                            <p class="text-slate-500 dark:text-slate-400 font-medium">Reply to students</p>
                        </div>
                        <div class="flex gap-2">
                            <select onchange="window.filterQA(this.value)"
                                class="input-modern px-4 py-2.5 rounded-xl text-sm outline-none dark:bg-slate-800 dark:border-slate-700">
                                <option value="All">All</option>
                                <option value="Wait">Wait</option>
                                <option value="Answered">Answered</option>
                            </select>
                            <input type="text" placeholder="Search..."
                                onkeyup="window.searchTable('qaTable', this.value)"
                                class="input-modern px-4 py-2.5 rounded-xl text-sm outline-none dark:bg-slate-800 dark:border-slate-700">
                        </div>
                    </header>
                    <div
                        class="bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-100 dark:border-white/5 overflow-hidden">
                        <table class="w-full text-left">
                            <thead
                                class="bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-white/5 text-slate-500 dark:text-slate-400 text-xs uppercase font-bold tracking-wider">
                                <tr>
                                    <th class="p-6 w-32">Date</th>
                                    <th class="p-6">Question</th>
                                    <th class="p-6">Answer</th>
                                    <th class="p-6 w-32">Action</th>
                                </tr>
                            </thead>
                            <tbody id="qaTable" class="text-sm divide-y divide-slate-50 dark:divide-white/5"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ANNOUNCEMENT -->
                <div id="view-announcement" class="hidden animate-in max-w-2xl mx-auto">
                    <div
                        class="bg-white dark:bg-slate-800 p-8 md:p-10 rounded-[2.5rem] shadow-lg border border-slate-100 dark:border-white/5">
                        <div class="mb-8 text-center">
                            <div
                                class="w-16 h-16 bg-brand-100 dark:bg-brand-900/30 text-brand-600 dark:text-brand-400 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                                <i class="fas fa-bullhorn"></i>
                            </div>
                            <h2 class="text-3xl font-bold text-slate-900 dark:text-white">Popup Manager</h2>
                            <p class="text-slate-500 dark:text-slate-400">Configure welcome popup</p>
                        </div>

                        <form onsubmit="window.saveAnnouncement(event)" class="space-y-6">
                            <div
                                class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-slate-100 dark:border-white/5">
                                <span class="font-bold text-slate-700 dark:text-slate-200">Active Status</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" name="active" id="annoActive" class="sr-only peer">
                                    <div
                                        class="w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-500">
                                    </div>
                                </label>
                            </div>

                            <div>
                                <label class="block text-xs font-bold text-slate-400 uppercase mb-2 ml-1">Title</label>
                                <input name="title" id="annoTitle"
                                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"
                                    placeholder="Popup Title">
                            </div>
                            <div>
                                <label
                                    class="block text-xs font-bold text-slate-400 uppercase mb-2 ml-1">Message</label>
                                <textarea name="detail" id="annoDetail" rows="3"
                                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"
                                    placeholder="Popup Message"></textarea>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-400 uppercase mb-2 ml-1">Image
                                    URL</label>
                                <input name="image" id="annoImage"
                                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"
                                    placeholder="https://...">
                            </div>

                            <button type="submit"
                                class="w-full bg-slate-900 dark:bg-white dark:text-slate-900 text-white py-4 rounded-xl font-bold shadow-lg hover:shadow-xl transition transform hover:-translate-y-1">Save
                                Changes</button>
                        </form>
                    </div>
                </div>

                <!-- ACTIVITIES -->
                <div id="view-activities" class="hidden animate-in max-w-6xl mx-auto">
                    <header class="mb-8 flex justify-between items-center">
                        <div>
                            <h2 class="text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight">News
                                Manager
                            </h2>
                            <p class="text-slate-500 dark:text-slate-400 font-medium">Post updates & photos</p>
                        </div>
                        <button onclick="window.openModal('activityModal')"
                            class="bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition"><i
                                class="fas fa-plus mr-2"></i> Add News</button>
                    </header>
                    <div id="activityGrid" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
                </div>

                <!-- MEMBERS -->
                <div id="view-members" class="hidden animate-in max-w-6xl mx-auto">
                    <header class="mb-8 flex justify-between items-center">
                        <div>
                            <h2 class="text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight">Team</h2>
                            <p class="text-slate-500 dark:text-slate-400 font-medium">Manage members</p>
                        </div>
                        <button onclick="window.openCreateMember()"
                            class="bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition"><i
                                class="fas fa-user-plus mr-2"></i> Add Member</button>
                    </header>
                    <div id="memberGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
                </div>

            </div>
        </main>
    </div>

    <!-- MODALS -->
    <!-- Policy Modal -->
    <div id="policyModal"
        class="hidden fixed inset-0 z-[70] bg-black/40 backdrop-blur-md flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 p-8 rounded-[2rem] w-full max-w-md shadow-2xl animate-in border border-white/20">
            <h3 id="policyModalTitle" class="font-bold text-2xl mb-6 text-slate-900 dark:text-white">Policy</h3>
            <form id="policyForm" onsubmit="window.handleFirebaseSubmit(event, 'policies', 'policyModal')"
                class="space-y-4">
                <input type="hidden" name="key" id="policyKey">
                <input name="title" id="policyTitle" placeholder="Title" required
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                <textarea name="detail" id="policyDetail" placeholder="Detail" required
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"
                    rows="4"></textarea>
                <input name="image" id="policyImage" placeholder="Image URL (Optional)"
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">

                <div class="flex gap-3">
                    <select name="status" id="policyStatus"
                        class="input-modern flex-1 p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                        <option value="Pending">Wait</option>
                        <option value="In Progress">Working</option>
                        <option value="Completed">Done</option>
                    </select>
                    <input name="percent" id="policyPercent" type="number" placeholder="%" min="0" max="100"
                        class="input-modern w-20 text-center p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                </div>

                <div class="pt-4 flex gap-3">
                    <button type="button" onclick="window.closeModal('policyModal')"
                        class="flex-1 py-3 text-slate-500 font-bold hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition">Cancel</button>
                    <button type="submit"
                        class="flex-1 bg-brand-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brand-700 transition">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- QA Modal -->
    <div id="qaModal"
        class="hidden fixed inset-0 z-[70] bg-black/40 backdrop-blur-md flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 p-8 rounded-[2rem] w-full max-w-md shadow-2xl animate-in border border-white/20">
            <h3 class="font-bold text-2xl mb-6 text-slate-900 dark:text-white">Reply Question</h3>
            <form onsubmit="window.submitReply(event)" class="space-y-4">
                <input type="hidden" name="key" id="qaKey">
                <div class="bg-brand-50 dark:bg-brand-900/20 p-4 rounded-xl text-sm text-brand-800 dark:text-brand-200 mb-4 italic border border-brand-100 dark:border-brand-500/20"
                    id="qaQuestionDisplay"></div>
                <textarea name="answer" id="qaAnswer" placeholder="Type your answer here..." required
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"
                    rows="4"></textarea>
                <div class="pt-4 flex gap-3">
                    <button type="button" onclick="window.closeModal('qaModal')"
                        class="flex-1 py-3 text-slate-500 font-bold hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition">Cancel</button>
                    <button type="submit"
                        class="flex-1 bg-brand-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brand-700 transition">Send</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Event Modal -->
    <div id="eventModal"
        class="hidden fixed inset-0 z-[70] bg-black/40 backdrop-blur-md flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 p-8 rounded-[2rem] w-full max-w-md shadow-2xl animate-in border border-white/20">
            <h3 class="font-bold text-2xl mb-6 text-slate-900 dark:text-white">Add Event</h3>
            <form onsubmit="window.handleFirebaseSubmit(event, 'events', 'eventModal')" class="space-y-4">
                <input type="hidden" name="key">
                <input name="title" placeholder="Event Title" required
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                <select name="category"
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                    <option value="ACADEMIC">Academic</option>
                    <option value="SPORTS">Sports</option>
                    <option value="VOLUNTEER">Volunteer</option>
                    <option value="EVENT">General</option>
                </select>
                <div class="grid grid-cols-2 gap-4">
                    <input name="date" type="date" required
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                    <input name="time" type="time"
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                </div>
                <input name="location" placeholder="Location" required
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                <textarea name="description" placeholder="Description" rows="3"
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"></textarea>

                <div class="pt-4 flex gap-3">
                    <button type="button" onclick="window.closeModal('eventModal')"
                        class="flex-1 py-3 text-slate-500 font-bold hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition">Cancel</button>
                    <button type="submit"
                        class="flex-1 bg-brand-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brand-700 transition">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Activity Modal -->
    <div id="activityModal"
        class="hidden fixed inset-0 z-[70] bg-black/40 backdrop-blur-md flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 p-8 rounded-[2rem] w-full max-w-md shadow-2xl animate-in border border-white/20">
            <h3 class="font-bold text-2xl mb-6 text-slate-900 dark:text-white">Add News</h3>
            <form onsubmit="window.handleFirebaseSubmit(event, 'activities', 'activityModal')" class="space-y-4">
                <input type="hidden" name="key">
                <input name="title" placeholder="News Headline" required
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                <select name="category"
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                    <option value="ACADEMIC">Academic</option>
                    <option value="SPORTS">Sports</option>
                    <option value="VOLUNTEER">Volunteer</option>
                    <option value="EVENT">General</option>
                </select>
                <input name="image" placeholder="Image URL (Landscape)" required
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                <textarea name="detail" placeholder="News Details / Content" rows="4"
                    class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"></textarea>
                <div class="pt-4 flex gap-3">
                    <button type="button" onclick="window.closeModal('activityModal')"
                        class="flex-1 py-3 text-slate-500 font-bold hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition">Cancel</button>
                    <button type="submit"
                        class="flex-1 bg-brand-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brand-700 transition">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Member Modal -->
    <div id="memberModal"
        class="hidden fixed inset-0 z-[70] bg-black/40 backdrop-blur-md flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 p-8 rounded-[2rem] w-full max-w-md shadow-2xl overflow-y-auto max-h-[90vh] animate-in border border-white/20">
            <h3 id="memberModalTitle" class="font-bold text-2xl mb-6 text-slate-900 dark:text-white">Manage Member</h3>
            <form id="memberForm" onsubmit="window.handleFirebaseSubmit(event, 'members', 'memberModal')"
                class="space-y-4">
                <input type="hidden" name="key" id="memberKey">

                <div class="space-y-4">
                    <input name="name" id="memberName" placeholder="Full Name" required
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                    <input name="role" id="memberRole" placeholder="Position / Role" required
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                    <input name="image" id="memberImage" placeholder="Profile Image URL (Portrait)" required
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                    <input name="link" id="memberLink" placeholder="Social Link (Optional)"
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                </div>

                <div class="pt-4 border-t border-slate-100 dark:border-white/5 space-y-4">
                    <input name="motto" id="memberMotto" placeholder="Quote (Motto)"
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white">
                    <textarea name="bio" id="memberBio" placeholder="Bio / History"
                        class="input-modern w-full p-3 rounded-xl dark:bg-slate-900/50 dark:border-slate-700 dark:text-white"
                        rows="3"></textarea>
                </div>

                <div class="pt-4 flex gap-3">
                    <button type="button" onclick="window.closeModal('memberModal')"
                        class="flex-1 py-3 text-slate-500 font-bold hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition">Cancel</button>
                    <button type="submit"
                        class="flex-1 bg-brand-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brand-700 transition">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="js/admin.js"></script>
    <script>
        // Mobile Sidebar Toggle (Moved to js/admin.js)
    </script>
</body>

</html>